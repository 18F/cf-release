---
name: haproxy

packages:
- haproxy
- syslog_aggregator

templates:
  syslog_forwarder.conf.erb: config/syslog_forwarder.conf
  haproxy.config.erb:        config/haproxy.config
  haproxy_ctl:               bin/haproxy_ctl
  cert.pem.erb:              config/cert.pem

properties:
  syslog_aggregator.address:
    description: "IP address for syslog aggregator"
  syslog_aggregator.port:
    description: "TCP port of syslog aggregator"
  syslog_aggregator.all:
    description: "Define whether forwarders should send all their syslog data to our aggregator."
    default: false
  syslog_aggregator.transport:
    description: "Transport to be used when forwarding logs (tcp|udp|relp)."
    default: "tcp"

  ha_proxy.ssl_pem:
    description: "SSL certificate (PEM file)"
    default: ~

  request_timeout_in_seconds:
    description: "Server and client timeouts in seconds"
    default: 300
  router.servers.z1:
    description: "Array of the router IPs acting as the first group of HTTP/TCP backends"
    default: []
  router.servers.z2:
    description: "Array of the router IPs acting as the second group of HTTP/TCP backends"
    default: []
  router.port:
    description: "Listening port for Router"
    default: 80

  networks.apps:
    description: "HAProxy network information."
